<!DOCTYPE html><!-- Layoutに記事タイトルを渡すことで<title>とh1を連動 --><html lang="ja"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>AstroでSwiperが動かない！解決策は？ | うにのBlog</title><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+JP:wght@200;300;400;500&family=M+PLUS+1:wght@100..900&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"><script type="module" src="/my-blog/_astro/Head.astro_astro_type_script_index_0_lang.Byiij0ra.js"></script><link rel="stylesheet" href="/my-blog/_astro/about.-hKUJYE9.css">
<style>.category-info[data-astro-cid-2q5oecfc]{font-family:"M PLUS 1",sans-serif;font-size:2.5rem;font-weight:100;letter-spacing:.04em;color:var(--text-color);display:inline-block;margin-bottom:.5em;position:fixed;top:87px;left:4vw;z-index:10000;height:49px;padding:0 3px;background-color:#ffffffb3;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px)}.category-info[data-astro-cid-2q5oecfc]:first-letter{font-size:3rem;color:var(--category-web)}.category-link[data-astro-cid-2q5oecfc]{display:inline-block}.category-info[data-astro-cid-2q5oecfc][data-category=web]:first-letter{color:var(--category-web)}.category-info[data-astro-cid-2q5oecfc][data-category=photo]:first-letter{color:var(--category-photo)}.category-info[data-astro-cid-2q5oecfc][data-category=stroll]:first-letter{color:var(--category-stroll)}.category-info[data-astro-cid-2q5oecfc][data-category=succulent]:first-letter{color:var(--category-succulent)}.category-info[data-astro-cid-2q5oecfc] span[data-astro-cid-2q5oecfc]{font-size:1.3rem;vertical-align:middle;margin-left:.5em}.header-wrapper[data-astro-cid-2q5oecfc]{background-color:var(--main-color);padding:15px 0 20px;margin-top:80px}.post-navigation[data-astro-cid-2q5oecfc]{margin-top:100px;display:flex;flex-wrap:wrap;justify-content:center;gap:15px}.post-navigation[data-astro-cid-2q5oecfc] a[data-astro-cid-2q5oecfc]{font-size:1.5rem;font-weight:300;display:block;padding:10px 0 5px;margin:0 15px;border-bottom:1px solid transparent;color:var(--text-color);text-decoration:none;opacity:1;transition:opacity .3s}.post-navigation[data-astro-cid-2q5oecfc] a[data-astro-cid-2q5oecfc]:hover{opacity:.5}
</style></head></html> <header class="header" data-astro-cid-t5gkxyh4> <div class="logo" data-astro-cid-t5gkxyh4> <a href="/my-blog" data-astro-cid-t5gkxyh4><img src="/my-blog/images/logo.png" alt="logo" data-astro-cid-t5gkxyh4></a> </div> <div class="openbtn" data-astro-cid-t5gkxyh4><span data-astro-cid-t5gkxyh4></span><span data-astro-cid-t5gkxyh4></span></div> <!-- メニューパネル --> <div class="menu-container" data-astro-cid-t5gkxyh4> <nav class="nav-menu" data-astro-cid-t5gkxyh4> <ul data-astro-cid-t5gkxyh4> <li data-astro-cid-t5gkxyh4><a href="/my-blog" data-astro-cid-t5gkxyh4>Home</a></li> <li data-astro-cid-t5gkxyh4><a href="/my-blog/blog/web" data-astro-cid-t5gkxyh4>Web</a></li> <li data-astro-cid-t5gkxyh4><a href="/my-blog/blog/photo" data-astro-cid-t5gkxyh4>Photo</a></li> <li data-astro-cid-t5gkxyh4><a href="/my-blog/blog/stroll" data-astro-cid-t5gkxyh4>Stroll</a></li> <li data-astro-cid-t5gkxyh4><a href="/my-blog/blog/succulent" data-astro-cid-t5gkxyh4>Succulent</a></li> <li data-astro-cid-t5gkxyh4><a href="/my-blog/about" data-astro-cid-t5gkxyh4>About</a></li> </ul> </nav> <div class="circle" data-astro-cid-t5gkxyh4></div> </div> </header>  <script type="module">document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("[data-astro-cid-t5gkxyh4].openbtn"),n=document.querySelector("[data-astro-cid-t5gkxyh4].menu-container"),t=document.querySelector("[data-astro-cid-t5gkxyh4].nav-menu");e&&n&&t&&(t.querySelectorAll("a").forEach(a=>{a.addEventListener("click",()=>{e.classList.remove("active"),n.classList.remove("panel-open"),t.classList.remove("active")})}),e.addEventListener("click",a=>{a.preventDefault(),e.classList.toggle("active"),n.classList.toggle("panel-open"),t.classList.toggle("active")}))});</script> <!-- ページの内容が入る -->   <main data-astro-cid-2q5oecfc> <article class="blog-post" data-astro-cid-2q5oecfc> <div class="header-wrapper" data-astro-cid-2q5oecfc> <header class="post-header" data-astro-cid-2q5oecfc> <a class="category-link" href="/my-blog/blog/web" data-astro-cid-2q5oecfc> <div class="category-info" data-category="web" data-astro-cid-2q5oecfc> Web<span data-astro-cid-2q5oecfc>- ウェブ</span> </div> </a> <h1 class="post-title" data-astro-cid-2q5oecfc> AstroでSwiperが動かない！解決策は？ </h1> <time class="post-date" datetime="2025-07-15T00:00:00.000Z" data-astro-cid-2q5oecfc> 2025/7/15 </time> <img src="/my-blog/images/img-test.png" alt="AstroでSwiperが動かない！解決策は？" class="post-eyecatch" data-astro-cid-2q5oecfc> </header> </div> <div class="post-content" data-category="web" data-astro-cid-2q5oecfc>  <h2 id="swiper-が動かないなぜ">Swiper が動かない、なぜ？</h2>
<p>Swiper を使ってスライダーを実装しようと、公式サイトのコード通りに CDN リンクと Script タグを書きました。ところが、動かない……！
Astro の仕様が影響しているのか、それとも書き方のミスか？
いろいろ試してみたものの、自力では解決できずに行き詰まってしまいました。</p>
<h2 id="これを書いたら動いた">これを書いたら動いた！</h2>
<p>そこで頼ったのは、やはり AI 先生。質問してみたところ、「公式コードに document.addEventListener(‘DOMContentLoaded’, function() {…}) を追加してみて」とのアドバイス。
半信半疑で試してみたら……なんと、動く！さすが AI 先生、頼りになります。</p>
<h2 id="原因はなに">原因はなに？</h2>
<p>調べてわかったのは、Swiper は <code>&#x3C;div class="swiper"> </code>や <code>&#x3C;div class="swiper-slide"> </code>など、特定の HTML 構造が存在していることを前提に動作するということ。
もし JavaScript が、これらの要素がまだ生成されていないタイミングで実行されると、Swiper はうまく初期化できず動かない、というわけです。
おそらく Astro の仕様でタイミングがずれているのだと思います。</p>
<p>そのため、DOMContentLoaded イベントを使って「DOM ツリーが完全に構築されてから Swiper の初期化コードを実行する」ようにする必要があった、ということですね。</p>
<p>なるほど、これでまたひとつ経験値を得ました。Web 制作の道は、こうした小さな不具合を地道に一つずつ乗り越えていくしかないんだなと実感しました。引き続き、頑張っていきます！</p>  </div> <nav class="post-navigation" data-astro-cid-2q5oecfc> <a href="/my-blog/blog/web" class="current" data-astro-cid-2q5oecfc>Web</a> <a href="/my-blog/blog/photo" class data-astro-cid-2q5oecfc>Photo</a> <a href="/my-blog/blog/stroll" class data-astro-cid-2q5oecfc>Stroll</a> <a href="/my-blog/blog/succulent" class data-astro-cid-2q5oecfc>Succulent</a> </nav> </article> </main>   <!-- フッターコンポーネント --><footer class="site-footer" data-astro-cid-sz7xmlte> <div class="container" data-astro-cid-sz7xmlte> <div class="logo" data-astro-cid-sz7xmlte><img src="/my-blog/images/logo.png" alt="logo" data-astro-cid-sz7xmlte></div> </div> <p data-astro-cid-sz7xmlte>&copy; 2025 ISHIKAWA All Rights Reserved</p> </footer>    <script type="module">window.addEventListener("DOMContentLoaded",()=>{const s=document.querySelectorAll(".fuwa"),n=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(t.target.classList.add("fade-in"),n.unobserve(t.target))})});s.forEach(e=>{n.observe(e)})});</script>